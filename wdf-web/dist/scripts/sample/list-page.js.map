{"version":3,"sources":["sample/list-page.js"],"names":["PAGE_SIZE","META","id","label","name","required","maxLength","email","type","age","birthday","format","status","options","value","TABLE_FIELDS","FILTER_FIELDS","EDIT_FIELDS","createData","item","WUI","ModalDialog","create","onConfirm","onCancel","dataDialog","$el","$","dialogPop","meta","list","buttonHide","fields","editData","window","open","deleteData","message","title","console","log","activeData","items","deactiveData","queryData","editResource","getResource","deleteResource","ajax","url","method","jsonData","currentPage","pageSize","then","resp","DataTable","operations","resourceDisplayName","callback","groups","className","DataPaginator","total","onSwitchPage","ready","queryResource","addResource","ContentHeader","DataFilter","queryButton","onFilter","params","extend","addButton","addFunc","init","system"],"mappings":"AAAA,YAEA,IAAIA,WAAY,GACZC,MACFC,IAAMC,MAAO,QACbC,MAAQD,MAAO,OAAQE,UAAU,EAAMC,UAAW,IAClDC,OAASJ,MAAO,QAASK,KAAM,QAASH,UAAU,EAAMC,UAAW,IACnEG,KAAON,MAAO,KAAME,UAAU,EAAMG,KAAM,UAC1CE,UAAYP,MAAO,KAAMK,KAAM,OAAQG,OAAQ,cAC/CC,QACET,MAAO,OACPK,KAAM,SACNK,UACEV,MAAO,MACPW,MAAO,IAEPX,MAAO,MACPW,MAAO,IAEPX,MAAO,KACPW,MAAO,IAEPX,MAAO,MACPW,MAAO,MAITC,cAAgB,KAAM,OAAQ,MAAO,WAAY,QAAS,UAC1DC,eAAiB,OAAQ,MAAO,WAAY,UAC5CC,aAAe,OAAQ,MAAO,WAAY,QAAS,UAEnDC,WAAa,SAAUC,GACzBC,IAAIC,YAAYC,QACdC,UAAW,aACXC,SAAU,eAGbJ,IAAIK,WAAWH,QACZI,IAAKC,EAAE,eACRC,WAAU,EACTC,KAAM5B,KACN6B,KAAMX,EACNY,YAAY,EACZC,OAAQf,eAIRgB,SAAW,SAAUd,GACvBe,OAAOC,KAAK,uBAAyBhB,EAAKjB,KAGxCkC,WAAa,SAAUjB,GACzBC,IAAIC,YAAYC,QACde,QAAS,QACTC,MAAO,OACPf,UAAW,WAAcgB,QAAQC,IAAI,cAAerB,OAIpDsB,WAAa,SAAUC,GACzBH,QAAQC,IAAI,WAAaE,IAGvBC,aAAe,SAAUD,GAC3BH,QAAQC,IAAKE,IAGXE,UAAY,SAAU/B,GACxB,GAAIgC,GAAezB,IAAI0B,YAAY,SAC/BC,EAAiB3B,IAAI0B,YAAY,UAErC1B,KAAI4B,MACFC,IAAK,uBACLC,OAAQ,MACRC,UACEC,YAAavC,EAAQuC,YACrBC,SAAUxC,EAAQwC,YAEnBC,KAAK,SAAUC,GAChBnC,IAAIoC,UAAUlC,QACZI,IAAKC,EAAE,eACPE,KAAM5B,KACN+B,OAAQjB,aACRe,KAAMyB,EAAKzB,KACX2B,aACErD,KAAMyC,GAAgBA,EAAaa,oBACnCC,SAAU1B,WAEV7B,KAAM2C,GAAkBA,EAAeW,oBACvCC,SAAUvB,aAEZwB,SACExD,KAAM,KACNyD,UAAW,yBACX3D,GAAI,cACJyD,SAAUlB,aAEVrC,KAAM,KACNyD,UAAW,wBACX3D,GAAI,aACJyD,SAAUhB,iBAIdvB,IAAI0C,cAAcxC,QAChBI,IAAKC,EAAE,mBACPyB,YAAavC,EAAQuC,YACrBW,MAAOR,EAAKQ,MACZV,SAAUxC,EAAQwC,SAClBW,aAAc,SAAUZ,GACtBR,WACEQ,YAAaA,EACbC,SAAUxC,EAAQwC,gBAO5BjC,KAAI6C,MAAQ,WACV,GAAIC,GAAgB9C,IAAI0B,YAAY,UAChCqB,EAAc/C,IAAI0B,YAAY,OAElC1B,KAAIgD,cAAc9C,QAChBI,IAAKC,EAAE,mBACPE,OACEzB,KAAM,WAIVgB,IAAIiD,WAAW/C,QACbI,IAAKC,EAAE,gBACPE,KAAM5B,KACN+B,OAAQhB,cACRsD,YAAaJ,GAAiBA,EAAcR,oBAC5Ca,SAAU,SAAUC,GAClB5B,UAAUjB,EAAE8C,OAAOD,GACjBpB,YAAa,EACbC,SAAUrD,cAGd0E,UAAWP,GAAeA,EAAYT,oBACtCiB,QAASzD,aAGX0B,WACEQ,YAAa,EACbC,SAAU,MAId1B,EAAE,WACAP,IAAIwD,MACFC,OAAQ","file":"sample/list-page.js","sourcesContent":["'use strict';\n// Constants\nvar PAGE_SIZE = 20;\nvar META = {\n  id: { label: '用户ID' },\n  name: { label: '用户姓名', required: true, maxLength: 20 },\n  email: { label: 'Email', type: 'email', required: true, maxLength: 11 },\n  age: { label: '年龄', required: true, type: 'number' },\n  birthday: { label: '生日', type: 'date', format: 'yyyy-DD-MM' },\n  status: {\n    label: '用户状态',\n    type: 'select',\n    options: [{\n      label: '未开户',\n      value: 0\n    }, {\n      label: '未激活',\n      value: 1\n    }, {\n      label: '正常',\n      value: 2\n    }, {\n      label: '已销户',\n      value: 3\n    }]\n  }\n};\nvar TABLE_FIELDS = ['id', 'name', 'age', 'birthday', 'email', 'status'];\nvar FILTER_FIELDS = ['name', 'age', 'birthday', 'status'];\nvar EDIT_FIELDS = ['name', 'age', 'birthday', 'email', 'status'];\n// Callback functions\nvar createData = function (item) {\n  WUI.ModalDialog.create({\n    onConfirm: function (/*itemInfo*/) {},\n    onCancel: function () {}\n  });\n\n WUI.dataDialog.create({\n    $el: $('.modal-body'),\n   dialogPop:true,\n    meta: META,\n    list: item,\n    buttonHide: false,\n    fields: EDIT_FIELDS\n  });\n};\n\nvar editData = function (item) {\n  window.open('detail-page.html?id=' + item.id);\n};\n\nvar deleteData = function (item) {\n  WUI.ModalDialog.create({\n    message: '11111',\n    title: '2222',\n    onConfirm: function () { console.log('delete data', item); }\n  });\n};\n\nvar activeData = function (items) {\n  console.log('active: ' + items);\n};\n\nvar deactiveData = function (items) {\n  console.log( items);\n};\n\nvar queryData = function (options) {\n  var editResource = WUI.getResource('/edit');\n  var deleteResource = WUI.getResource('/delete');\n\n  WUI.ajax({\n    url: '/sample/web/v1/users',\n    method: 'GET',\n    jsonData: {\n      currentPage: options.currentPage,\n      pageSize: options.pageSize\n    }\n  }).then(function (resp) {\n    WUI.DataTable.create({\n      $el: $('.data-table'),\n      meta: META,\n      fields: TABLE_FIELDS,\n      list: resp.list,\n      operations: [{\n        name: editResource && editResource.resourceDisplayName,\n        callback: editData\n      }, {\n        name: deleteResource && deleteResource.resourceDisplayName,\n        callback: deleteData\n      }],\n      groups: [{\n        name: '启用',\n        className: 'btn btn-xs btn-success',\n        id: 'btn-success',\n        callback: activeData\n      }, {\n        name: '停用',\n        className: 'btn btn-xs btn-danger',\n        id: 'btn-danger',\n        callback: deactiveData\n      }]\n    });\n\n    WUI.DataPaginator.create({\n      $el: $('.data-paginator'),\n      currentPage: options.currentPage,\n      total: resp.total,\n      pageSize: options.pageSize,\n      onSwitchPage: function (currentPage) {\n        queryData({\n          currentPage: currentPage,\n          pageSize: options.pageSize\n        });\n      }\n    });\n  });\n};\n// Load Page\nWUI.ready = function () {\n  var queryResource = WUI.getResource('/query');\n  var addResource = WUI.getResource('/add');\n\n  WUI.ContentHeader.create({\n    $el: $('.content-header'),\n    meta: [{\n      name: '列表页面'\n    }]\n  });\n\n  WUI.DataFilter.create({\n    $el: $('.data-filter'),\n    meta: META,\n    fields: FILTER_FIELDS,\n    queryButton: queryResource && queryResource.resourceDisplayName,\n    onFilter: function (params) {\n      queryData($.extend(params, {\n        currentPage: 0,\n        pageSize: PAGE_SIZE\n      }));\n    },\n    addButton: addResource && addResource.resourceDisplayName,\n    addFunc: createData\n  });\n\n  queryData({\n    currentPage: 0,\n    pageSize: 20\n  });\n}\n  // Keep this function\n$(function () {\n  WUI.init({\n    system: 'sample'\n  });\n});\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJzYW1wbGUvbGlzdC1wYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8vIENvbnN0YW50c1xudmFyIFBBR0VfU0laRSA9IDIwO1xudmFyIE1FVEEgPSB7XG4gIGlkOiB7IGxhYmVsOiAn55So5oi3SUQnIH0sXG4gIG5hbWU6IHsgbGFiZWw6ICfnlKjmiLflp5PlkI0nLCByZXF1aXJlZDogdHJ1ZSwgbWF4TGVuZ3RoOiAyMCB9LFxuICBlbWFpbDogeyBsYWJlbDogJ0VtYWlsJywgdHlwZTogJ2VtYWlsJywgcmVxdWlyZWQ6IHRydWUsIG1heExlbmd0aDogMTEgfSxcbiAgYWdlOiB7IGxhYmVsOiAn5bm06b6EJywgcmVxdWlyZWQ6IHRydWUsIHR5cGU6ICdudW1iZXInIH0sXG4gIGJpcnRoZGF5OiB7IGxhYmVsOiAn55Sf5pelJywgdHlwZTogJ2RhdGUnLCBmb3JtYXQ6ICd5eXl5LURELU1NJyB9LFxuICBzdGF0dXM6IHtcbiAgICBsYWJlbDogJ+eUqOaIt+eKtuaAgScsXG4gICAgdHlwZTogJ3NlbGVjdCcsXG4gICAgb3B0aW9uczogW3tcbiAgICAgIGxhYmVsOiAn5pyq5byA5oi3JyxcbiAgICAgIHZhbHVlOiAwXG4gICAgfSwge1xuICAgICAgbGFiZWw6ICfmnKrmv4DmtLsnLFxuICAgICAgdmFsdWU6IDFcbiAgICB9LCB7XG4gICAgICBsYWJlbDogJ+ato+W4uCcsXG4gICAgICB2YWx1ZTogMlxuICAgIH0sIHtcbiAgICAgIGxhYmVsOiAn5bey6ZSA5oi3JyxcbiAgICAgIHZhbHVlOiAzXG4gICAgfV1cbiAgfVxufTtcbnZhciBUQUJMRV9GSUVMRFMgPSBbJ2lkJywgJ25hbWUnLCAnYWdlJywgJ2JpcnRoZGF5JywgJ2VtYWlsJywgJ3N0YXR1cyddO1xudmFyIEZJTFRFUl9GSUVMRFMgPSBbJ25hbWUnLCAnYWdlJywgJ2JpcnRoZGF5JywgJ3N0YXR1cyddO1xudmFyIEVESVRfRklFTERTID0gWyduYW1lJywgJ2FnZScsICdiaXJ0aGRheScsICdlbWFpbCcsICdzdGF0dXMnXTtcbi8vIENhbGxiYWNrIGZ1bmN0aW9uc1xudmFyIGNyZWF0ZURhdGEgPSBmdW5jdGlvbiAoaXRlbSkge1xuICBXVUkuTW9kYWxEaWFsb2cuY3JlYXRlKHtcbiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgvKml0ZW1JbmZvKi8pIHt9LFxuICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiAoKSB7fVxuICB9KTtcblxuIFdVSS5kYXRhRGlhbG9nLmNyZWF0ZSh7XG4gICAgJGVsOiAkKCcubW9kYWwtYm9keScpLFxuICAgZGlhbG9nUG9wOnRydWUsXG4gICAgbWV0YTogTUVUQSxcbiAgICBsaXN0OiBpdGVtLFxuICAgIGJ1dHRvbkhpZGU6IGZhbHNlLFxuICAgIGZpZWxkczogRURJVF9GSUVMRFNcbiAgfSk7XG59O1xuXG52YXIgZWRpdERhdGEgPSBmdW5jdGlvbiAoaXRlbSkge1xuICB3aW5kb3cub3BlbignZGV0YWlsLXBhZ2UuaHRtbD9pZD0nICsgaXRlbS5pZCk7XG59O1xuXG52YXIgZGVsZXRlRGF0YSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIFdVSS5Nb2RhbERpYWxvZy5jcmVhdGUoe1xuICAgIG1lc3NhZ2U6ICcxMTExMScsXG4gICAgdGl0bGU6ICcyMjIyJyxcbiAgICBvbkNvbmZpcm06IGZ1bmN0aW9uICgpIHsgY29uc29sZS5sb2coJ2RlbGV0ZSBkYXRhJywgaXRlbSk7IH1cbiAgfSk7XG59O1xuXG52YXIgYWN0aXZlRGF0YSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBjb25zb2xlLmxvZygnYWN0aXZlOiAnICsgaXRlbXMpO1xufTtcblxudmFyIGRlYWN0aXZlRGF0YSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBjb25zb2xlLmxvZyggaXRlbXMpO1xufTtcblxudmFyIHF1ZXJ5RGF0YSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gIHZhciBlZGl0UmVzb3VyY2UgPSBXVUkuZ2V0UmVzb3VyY2UoJy9lZGl0Jyk7XG4gIHZhciBkZWxldGVSZXNvdXJjZSA9IFdVSS5nZXRSZXNvdXJjZSgnL2RlbGV0ZScpO1xuXG4gIFdVSS5hamF4KHtcbiAgICB1cmw6ICcvc2FtcGxlL3dlYi92MS91c2VycycsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBqc29uRGF0YToge1xuICAgICAgY3VycmVudFBhZ2U6IG9wdGlvbnMuY3VycmVudFBhZ2UsXG4gICAgICBwYWdlU2l6ZTogb3B0aW9ucy5wYWdlU2l6ZVxuICAgIH1cbiAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgIFdVSS5EYXRhVGFibGUuY3JlYXRlKHtcbiAgICAgICRlbDogJCgnLmRhdGEtdGFibGUnKSxcbiAgICAgIG1ldGE6IE1FVEEsXG4gICAgICBmaWVsZHM6IFRBQkxFX0ZJRUxEUyxcbiAgICAgIGxpc3Q6IHJlc3AubGlzdCxcbiAgICAgIG9wZXJhdGlvbnM6IFt7XG4gICAgICAgIG5hbWU6IGVkaXRSZXNvdXJjZSAmJiBlZGl0UmVzb3VyY2UucmVzb3VyY2VEaXNwbGF5TmFtZSxcbiAgICAgICAgY2FsbGJhY2s6IGVkaXREYXRhXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6IGRlbGV0ZVJlc291cmNlICYmIGRlbGV0ZVJlc291cmNlLnJlc291cmNlRGlzcGxheU5hbWUsXG4gICAgICAgIGNhbGxiYWNrOiBkZWxldGVEYXRhXG4gICAgICB9XSxcbiAgICAgIGdyb3VwczogW3tcbiAgICAgICAgbmFtZTogJ+WQr+eUqCcsXG4gICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4teHMgYnRuLXN1Y2Nlc3MnLFxuICAgICAgICBpZDogJ2J0bi1zdWNjZXNzJyxcbiAgICAgICAgY2FsbGJhY2s6IGFjdGl2ZURhdGFcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ+WBnOeUqCcsXG4gICAgICAgIGNsYXNzTmFtZTogJ2J0biBidG4teHMgYnRuLWRhbmdlcicsXG4gICAgICAgIGlkOiAnYnRuLWRhbmdlcicsXG4gICAgICAgIGNhbGxiYWNrOiBkZWFjdGl2ZURhdGFcbiAgICAgIH1dXG4gICAgfSk7XG5cbiAgICBXVUkuRGF0YVBhZ2luYXRvci5jcmVhdGUoe1xuICAgICAgJGVsOiAkKCcuZGF0YS1wYWdpbmF0b3InKSxcbiAgICAgIGN1cnJlbnRQYWdlOiBvcHRpb25zLmN1cnJlbnRQYWdlLFxuICAgICAgdG90YWw6IHJlc3AudG90YWwsXG4gICAgICBwYWdlU2l6ZTogb3B0aW9ucy5wYWdlU2l6ZSxcbiAgICAgIG9uU3dpdGNoUGFnZTogZnVuY3Rpb24gKGN1cnJlbnRQYWdlKSB7XG4gICAgICAgIHF1ZXJ5RGF0YSh7XG4gICAgICAgICAgY3VycmVudFBhZ2U6IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIHBhZ2VTaXplOiBvcHRpb25zLnBhZ2VTaXplXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG4vLyBMb2FkIFBhZ2VcbldVSS5yZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHF1ZXJ5UmVzb3VyY2UgPSBXVUkuZ2V0UmVzb3VyY2UoJy9xdWVyeScpO1xuICB2YXIgYWRkUmVzb3VyY2UgPSBXVUkuZ2V0UmVzb3VyY2UoJy9hZGQnKTtcblxuICBXVUkuQ29udGVudEhlYWRlci5jcmVhdGUoe1xuICAgICRlbDogJCgnLmNvbnRlbnQtaGVhZGVyJyksXG4gICAgbWV0YTogW3tcbiAgICAgIG5hbWU6ICfliJfooajpobXpnaInXG4gICAgfV1cbiAgfSk7XG5cbiAgV1VJLkRhdGFGaWx0ZXIuY3JlYXRlKHtcbiAgICAkZWw6ICQoJy5kYXRhLWZpbHRlcicpLFxuICAgIG1ldGE6IE1FVEEsXG4gICAgZmllbGRzOiBGSUxURVJfRklFTERTLFxuICAgIHF1ZXJ5QnV0dG9uOiBxdWVyeVJlc291cmNlICYmIHF1ZXJ5UmVzb3VyY2UucmVzb3VyY2VEaXNwbGF5TmFtZSxcbiAgICBvbkZpbHRlcjogZnVuY3Rpb24gKHBhcmFtcykge1xuICAgICAgcXVlcnlEYXRhKCQuZXh0ZW5kKHBhcmFtcywge1xuICAgICAgICBjdXJyZW50UGFnZTogMCxcbiAgICAgICAgcGFnZVNpemU6IFBBR0VfU0laRVxuICAgICAgfSkpO1xuICAgIH0sXG4gICAgYWRkQnV0dG9uOiBhZGRSZXNvdXJjZSAmJiBhZGRSZXNvdXJjZS5yZXNvdXJjZURpc3BsYXlOYW1lLFxuICAgIGFkZEZ1bmM6IGNyZWF0ZURhdGFcbiAgfSk7XG5cbiAgcXVlcnlEYXRhKHtcbiAgICBjdXJyZW50UGFnZTogMCxcbiAgICBwYWdlU2l6ZTogMjBcbiAgfSk7XG59XG4gIC8vIEtlZXAgdGhpcyBmdW5jdGlvblxuJChmdW5jdGlvbiAoKSB7XG4gIFdVSS5pbml0KHtcbiAgICBzeXN0ZW06ICdzYW1wbGUnXG4gIH0pO1xufSk7XG4iXSwiZmlsZSI6InNhbXBsZS9saXN0LXBhZ2UuanMiLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==\n"],"sourceRoot":"/source/"}