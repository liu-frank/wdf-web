"use strict";var PAGE_SIZE=20,META={id:{label:"用户ID"},name:{label:"用户姓名",required:!0,maxLength:20},email:{label:"Email",type:"email",required:!0,maxLength:11},age:{label:"年龄",required:!0,type:"number"},birthday:{label:"生日",type:"date",format:"yyyy-DD-MM"},status:{label:"用户状态",type:"select",options:[{label:"未开户",value:0},{label:"未激活",value:1},{label:"正常",value:2},{label:"已销户",value:3}]}},TABLE_FIELDS=["id","name","age","birthday","email","status"],FILTER_FIELDS=["name","age","birthday","status"],EDIT_FIELDS=["name","age","birthday","email","status"],createData=function(e){WUI.ModalDialog.create({onConfirm:function(){},onCancel:function(){}}),WUI.dataDialog.create({$el:$(".modal-body"),dialogPop:!0,meta:META,list:e,buttonHide:!1,fields:EDIT_FIELDS})},editData=function(e){window.open("detail-page.html?id="+e.id)},deleteData=function(e){WUI.ModalDialog.create({message:"11111",title:"2222",onConfirm:function(){console.log("delete data",e)}})},activeData=function(e){console.log("active: "+e)},deactiveData=function(e){console.log(e)},queryData=function(e){var a=WUI.getResource("/edit"),t=WUI.getResource("/delete");WUI.ajax({url:"/sample/web/v1/users",method:"GET",jsonData:{currentPage:e.currentPage,pageSize:e.pageSize}}).then(function(l){WUI.DataTable.create({$el:$(".data-table"),meta:META,fields:TABLE_FIELDS,list:l.list,operations:[{name:a&&a.resourceDisplayName,callback:editData},{name:t&&t.resourceDisplayName,callback:deleteData}],groups:[{name:"启用",className:"btn btn-xs btn-success",id:"btn-success",callback:activeData},{name:"停用",className:"btn btn-xs btn-danger",id:"btn-danger",callback:deactiveData}]}),WUI.DataPaginator.create({$el:$(".data-paginator"),currentPage:e.currentPage,total:l.total,pageSize:e.pageSize,onSwitchPage:function(a){queryData({currentPage:a,pageSize:e.pageSize})}})})};WUI.ready=function(){var e=WUI.getResource("/query"),a=WUI.getResource("/add");WUI.ContentHeader.create({$el:$(".content-header"),meta:[{name:"列表页面"}]}),WUI.DataFilter.create({$el:$(".data-filter"),meta:META,fields:FILTER_FIELDS,queryButton:e&&e.resourceDisplayName,onFilter:function(e){queryData($.extend(e,{currentPage:0,pageSize:PAGE_SIZE}))},addButton:a&&a.resourceDisplayName,addFunc:createData}),queryData({currentPage:0,pageSize:20})},$(function(){WUI.init({system:"sample"})});
//# sourceMappingURL=list-page.js.map
