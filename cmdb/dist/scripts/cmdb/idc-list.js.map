{"version":3,"sources":["cmdb/idc-list.js"],"names":["CMDB_API","queryDictionary","add","delete","update","column","query","export","import","META","label","required","maxLength","EDIT_FIELDS","selectAry","createData","item","$","each","i","e","j","options","length","select","WUI","ModalDialog","create","buttonHide","dataDialog","$el","dialogPop","meta","list","onConfirm","submitData","bind","fields","ready","ContentHeader","name","init","system"],"mappings":"AAAA,YAEA,IAAIA,WACFC,gBAAiB,uBACjBC,IAAK,eACLC,SAAQ,mBACRC,OAAQ,kBACRC,OAAQ,mBACRC,MAAO,kBACPC,SAAQ,2BACRC,SAAQ,yBAEVC,MAAW,MAAMC,MAAO,WAAYC,UAAU,EAAMC,UAAU,GAC9D,IAAIC,cAAe,OAAQ,WAAY,cAAe,OAAQ,SAAU,kBAAmB,eAEvFC,WAAa,SAAU,mBACvBC,WAAa,SAAUC,GAEzBC,EAAEC,KAAKJ,UAAU,SAASK,EAAGC,GAC3B,IAAI,GAAIC,GAAE,EAAEA,EAAEZ,KAAKW,GAAGE,QAAQC,OAAOF,IAC/BZ,KAAKW,GAAGE,QAAQD,GAAGX,OAASM,EAAKI,GACnCX,KAAKW,GAAGE,QAAQD,GAAGG,QAAS,EAE5Bf,KAAKW,GAAGE,QAAQD,GAAGG,QAAS,IAKlCC,IAAIC,YAAYC,QACdC,YAAY,IAGdH,IAAII,WAAWF,QACbG,IAAKb,EAAE,eACPc,WAAU,EACVC,KAAMvB,KACNwB,KAAMjB,EACNY,YAAY,EACZM,UAAWC,WAAWC,KAAK,KAAMpB,GACjCqB,OAAQxB,cAKZY,KAAIa,MAAQ,WAEVrC,gBAAgB,QAGhBwB,IAAIc,cAAcZ,QAChBG,IAAKb,EAAE,mBACPe,OACEQ,KAAM,UAKZvB,EAAE,WACAQ,IAAIgB,MACFC,OAAQ","file":"idc-list.js","sourcesContent":["'use strict';\n// Constants\nvar CMDB_API = {\n  queryDictionary: '/web/queryDictionary', // 数据字典\n  add: '/web/addRack', // 增\n  delete: '/web/deleteRacks', // 删\n  update: '/web/updateRack', // 改\n  column: '/web/rack/column', // 查询条件\n  query: '/web/rack/query', // 查\n  export: '/web/excel/download/rack', // export\n  import: '/web/excel/upload/rack' // import\n};\nMETA['code'] = { label: 'IDC_code', required: true, maxLength:30 };\nvar EDIT_FIELDS = ['code', 'location', 'rack_region', 'rack', 'status', 'computer_amount', 'description'];\n\nvar selectAry = ['status', 'computer_amount'];\nvar createData = function (item) {\n  // 初始化select\n  $.each(selectAry,function(i, e){\n    for(var j=0;j<META[e].options.length;j++){\n      if (META[e].options[j].label == item[e]) {\n        META[e].options[j].select = true;\n      } else {\n        META[e].options[j].select = false;\n      }\n    }\n  });\n\n  WUI.ModalDialog.create({\n    buttonHide: true,\n  });\n\n  WUI.dataDialog.create({\n    $el: $('.modal-body'),\n    dialogPop:true,\n    meta: META,\n    list: item,\n    buttonHide: false,\n    onConfirm: submitData.bind(null, item),\n    fields: EDIT_FIELDS\n  });\n};\n\n// Load Page\nWUI.ready = function () {\n  // meta的元素数据字典 => cloumn数据 => 查询数据\n  queryDictionary('rack');\n\n  // 面包屑\n  WUI.ContentHeader.create({\n    $el: $('.content-header'),\n    meta: [{\n      name: '位置'\n    }]\n  });\n}\n// Keep this function\n$(function () {\n  WUI.init({\n    system: 'cmdb'\n  });\n});\n\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJjbWRiL2lkYy1saXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0Jztcbi8vIENvbnN0YW50c1xudmFyIENNREJfQVBJID0ge1xuICBxdWVyeURpY3Rpb25hcnk6ICcvd2ViL3F1ZXJ5RGljdGlvbmFyeScsIC8vIOaVsOaNruWtl+WFuFxuICBhZGQ6ICcvd2ViL2FkZFJhY2snLCAvLyDlop5cbiAgZGVsZXRlOiAnL3dlYi9kZWxldGVSYWNrcycsIC8vIOWIoFxuICB1cGRhdGU6ICcvd2ViL3VwZGF0ZVJhY2snLCAvLyDmlLlcbiAgY29sdW1uOiAnL3dlYi9yYWNrL2NvbHVtbicsIC8vIOafpeivouadoeS7tlxuICBxdWVyeTogJy93ZWIvcmFjay9xdWVyeScsIC8vIOafpVxuICBleHBvcnQ6ICcvd2ViL2V4Y2VsL2Rvd25sb2FkL3JhY2snLCAvLyBleHBvcnRcbiAgaW1wb3J0OiAnL3dlYi9leGNlbC91cGxvYWQvcmFjaycgLy8gaW1wb3J0XG59O1xuTUVUQVsnY29kZSddID0geyBsYWJlbDogJ0lEQ19jb2RlJywgcmVxdWlyZWQ6IHRydWUsIG1heExlbmd0aDozMCB9O1xudmFyIEVESVRfRklFTERTID0gWydjb2RlJywgJ2xvY2F0aW9uJywgJ3JhY2tfcmVnaW9uJywgJ3JhY2snLCAnc3RhdHVzJywgJ2NvbXB1dGVyX2Ftb3VudCcsICdkZXNjcmlwdGlvbiddO1xuXG52YXIgc2VsZWN0QXJ5ID0gWydzdGF0dXMnLCAnY29tcHV0ZXJfYW1vdW50J107XG52YXIgY3JlYXRlRGF0YSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIC8vIOWIneWni+WMlnNlbGVjdFxuICAkLmVhY2goc2VsZWN0QXJ5LGZ1bmN0aW9uKGksIGUpe1xuICAgIGZvcih2YXIgaj0wO2o8TUVUQVtlXS5vcHRpb25zLmxlbmd0aDtqKyspe1xuICAgICAgaWYgKE1FVEFbZV0ub3B0aW9uc1tqXS5sYWJlbCA9PSBpdGVtW2VdKSB7XG4gICAgICAgIE1FVEFbZV0ub3B0aW9uc1tqXS5zZWxlY3QgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgTUVUQVtlXS5vcHRpb25zW2pdLnNlbGVjdCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgV1VJLk1vZGFsRGlhbG9nLmNyZWF0ZSh7XG4gICAgYnV0dG9uSGlkZTogdHJ1ZSxcbiAgfSk7XG5cbiAgV1VJLmRhdGFEaWFsb2cuY3JlYXRlKHtcbiAgICAkZWw6ICQoJy5tb2RhbC1ib2R5JyksXG4gICAgZGlhbG9nUG9wOnRydWUsXG4gICAgbWV0YTogTUVUQSxcbiAgICBsaXN0OiBpdGVtLFxuICAgIGJ1dHRvbkhpZGU6IGZhbHNlLFxuICAgIG9uQ29uZmlybTogc3VibWl0RGF0YS5iaW5kKG51bGwsIGl0ZW0pLFxuICAgIGZpZWxkczogRURJVF9GSUVMRFNcbiAgfSk7XG59O1xuXG4vLyBMb2FkIFBhZ2VcbldVSS5yZWFkeSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gbWV0YeeahOWFg+e0oOaVsOaNruWtl+WFuCA9PiBjbG91bW7mlbDmja4gPT4g5p+l6K+i5pWw5o2uXG4gIHF1ZXJ5RGljdGlvbmFyeSgncmFjaycpO1xuXG4gIC8vIOmdouWMheWxkVxuICBXVUkuQ29udGVudEhlYWRlci5jcmVhdGUoe1xuICAgICRlbDogJCgnLmNvbnRlbnQtaGVhZGVyJyksXG4gICAgbWV0YTogW3tcbiAgICAgIG5hbWU6ICfkvY3nva4nXG4gICAgfV1cbiAgfSk7XG59XG4vLyBLZWVwIHRoaXMgZnVuY3Rpb25cbiQoZnVuY3Rpb24gKCkge1xuICBXVUkuaW5pdCh7XG4gICAgc3lzdGVtOiAnY21kYidcbiAgfSk7XG59KTtcbiJdLCJmaWxlIjoiY21kYi9pZGMtbGlzdC5qcyJ9\n"]}