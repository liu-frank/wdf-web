"use strict";var CMDB_API={queryDictionary:"/web/queryDictionary",add:"/web/addPeople","delete":"/web/deletePeoples",update:"/web/updatePeople",column:"/web/people/column",query:"/web/people/query","export":"/web/excel/download/people","import":"/web/excel/upload/people"};META.code={label:"用户名",required:!0,maxLength:30},META.name={label:"姓名",maxLength:30},META.phone={label:"电话",maxLength:30},META.mail={label:"邮箱",maxLength:30},META.type={label:"类型",type:"select",options:[]},META.password={label:"密码",maxLength:30},META.password2={label:"确认密码",maxLength:30};var EDIT_FIELDS=["code","name","phone","mail","password","password2","status","type","description"];SEARCH_TOOLS=[];var selectAry=["status","type"],createData=function(e){$.each(selectAry,function(a,t){for(var o=0;o<META[t].options.length;o++)META[t].options[o].label==e[t]?META[t].options[o].select=!0:META[t].options[o].select=!1}),WUI.ModalDialog.create({buttonHide:!0}),WUI.dataDialog.create({$el:$(".modal-body"),dialogPop:!0,meta:META,list:e,buttonHide:!1,onConfirm:submitData.bind(null,e),fields:EDIT_FIELDS})};queryData=function(e){var a=function(a){a.setRequestHeader("pageNum",e.currentPage),a.setRequestHeader("pageLimit",e.pageSize),a.setRequestHeader("Authorization",getCookie("CMDB-TOKEN-TYPE")+" "+getCookie("CMDB-TOKEN"))};WUI.ajax({url:DOMAIN.CMDB+CMDB_API.query,method:"POST",jsonData:queryJson(),disableXSS:!0,beforeSend:a}).then(function(a){WUI.DataTable.create({$el:$(".data-table"),meta:META,fields:TABLE_FIELDS,list:a.list,operations:[{name:"编辑",callback:createData},{name:"删除",callback:deleteData}],groups:[{name:"批量删除",className:"btn btn-xs btn-danger",id:"btn-danger",callback:deleteData}]}),WUI.DataPaginator.create({$el:$(".data-paginator"),currentPage:e.currentPage-1,total:a.totalCount,pageSize:e.pageSize,onSwitchPage:function(a){queryData({currentPage:a+1,pageSize:e.pageSize})}})})},WUI.ready=function(){queryDictionary("people"),WUI.ContentHeader.create({$el:$(".content-header"),meta:[{name:"人员"}]})},$(function(){WUI.init({system:"cmdb"})});
//# sourceMappingURL=people-list.js.map
